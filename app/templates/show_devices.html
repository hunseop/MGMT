
{% extends "base.html" %}

{% block content %}
<div class="container py-5">
    <h2 class="mb-4">Firewall 연동된 장비 목록</h2>
    <div class="mb-3">
        <input type="text" id="searchInput" class="form-control" placeholder="장비 검색...">
    </div>
    <table class="table">
        <thead>
            <tr>
                <th scope="col">No</th>
                <th scope="col">Vendor</th>
                <th scope="col">Model</th>
                <th scope="col">IP</th>
                <th scope="col">Status</th>
            </tr>
        </thead>
        <tbody id="deviceList">
            <!-- 장비 목록이 여기에 동적으로 추가됩니다. -->
        </tbody>
    </table>
</div>

<script>
    // 장비 목록 데이터 (임시 데이터)
    const devices = [
        { vendor: "Paloalto", model: "PA-220", ip: "192.168.1.1", status: "연결됨" },
        { vendor: "SECUI", model: "MF2", ip: "192.168.1.2", status: "연결됨" },
        { vendor: "Paloalto", model: "PA-820", ip: "192.168.1.3", status: "연결 안됨" }
    ];

    // 페이지 로드 시 장비 목록 표시
    window.addEventListener("DOMContentLoaded", function() {
        renderDeviceList(devices);
    });

    // 장비 목록 표시 함수
    function renderDeviceList(devices) {
        const deviceList = document.getElementById("deviceList");
        deviceList.innerHTML = ""; // 목록 초기화

        devices.forEach(function(device, index) {
            const row = `
                <tr>
                    <th scope="row">${index + 1}</th>
                    <td>${device.vendor}</td>
                    <td>${device.model}</td>
                    <td>${device.ip}</td>
                    <td>${device.status}</td>
                </tr>
            `;
            deviceList.insertAdjacentHTML("beforeend", row);
        });
    }

    // 검색 기능 구현
    document.getElementById("searchInput").addEventListener("input", function() {
        const searchTerm = this.value.toLowerCase();
        const filteredDevices = devices.filter(function(device) {
            return (
                device.vendor.toLowerCase().includes(searchTerm) ||
                device.model.toLowerCase().includes(searchTerm) ||
                device.ip.toLowerCase().includes(searchTerm) ||
                device.status.toLowerCase().includes(searchTerm)
            );
        });
        renderDeviceList(filteredDevices);
    });
</script>
{% endblock %}
